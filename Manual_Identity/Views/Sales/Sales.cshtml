@model Manual_Identity.ViewModels.SalesViewModel
@{
    ViewData["Title"] = "Customer";
    //Layout = "~/Views/Shared/SideNavBar.cshtml";
   
}
<body style="margin-left:0px;">

  <script src="~/lib/jquery/dist/jquery.min.js"></script>
  <script src="~/js/Cart.js"></script>
  <link rel="stylesheet" href="~/css/sales.css" />
 
  <div class="sales_container ">
      <div class="col-md-4"  asp-validation-summary="ModelOnly"></div>
      <form method="post" asp-action="Sales">
         <div style="width:100%;background-color:blue;padding:5px 10px">
           <h6 >Purchase Information</h6>
         </div>
        
        <div class="row mt-2" style="padding:0px 10px;">
           <div class="col-sm-4">
             <label class="form-label">InVoice No:</label>
             <input asp-for="InvoiceNumber" class="form-control" readonly/>
             <span asp-validation-for="InvoiceNumber" ></span>
           </div>
           <div class="col-sm-4">
             <label class="form-label">Purchase Date:</label>
             <input asp-for="SalesDate" class="form-control" readonly/>
             <span asp-validation-for="SalesDate"></span>
           </div>
            <div class="col-sm-4 mb-3">
             <label class="form-label">Customer ID:</label>
             <select asp-for="CustomerId" class="form-control  max-width-300" id="customer_id"
               asp-items="@(new SelectList(ViewBag.Customer,"CustomerId","CustomerName"))"></select>
           </div>
           <div class="col-sm-4">
              <label class="form-label">Item ID:</label>
              <select asp-for="ItemId" class="form-control ml-10 max-width-300" id="item_id"
                 asp-items="@(new SelectList(ViewBag.Item,"ItemId","ItemName"))"></select>
           </div>
            <div class="col-sm-4">
             <label class="form-label">Quantity:</label>
             <input asp-for="Quantity" class="form-control" id="quantity_id" />
             <span asp-validation-for="Quantity"></span>
           </div>
           <div class="col-sm-4">
             <label class="form-label">Unit Price:</label>
             <input asp-for="UnitPrice" class="form-control" id="unitprice_id" />
             <span asp-validation-for="UnitPrice"></span>
           </div>
        </div>
          <input type="button" class="btn btn-success addtocart" style="margin-top:15px;margin-left:10px;padding:7px 10px;" value="Add To Cart"/>
          <div class="cartlist">  
       @*       Cart Item              
                    <div class="emptycart">
                        Cart List is Empty...               
                    </div>
                   
                
                   *@
                        <div id="show_tab">
                    @*Cart table show here *@
              </div>
              <div id="cal" style="margin-top: 20px; margin-left:10px;"></div>
   
             </div>

              <div id="to"class="row" style="display:none; margin:20px 10px;padding:20px 10px;border: 2px solid white;">
                      <div class="col-sm-4">
                              <label asp-for="TotalAmount"  class="form-label"></label>
                              <input  asp-for="TotalAmount"  class="form-control" id="totalamount_id" readonly><br />
                              <span asp-validation-for="TotalAmount"></span>
                          </div>
                           <div class="col-sm-4">
                              <label asp-for="PaidAmount"  class="form-label"></label>
                            <input  asp-for="PaidAmount" placeholder="PaidAmount" class="form-control" id="paidamount_id"><br />
                                <span asp-validation-for="PaidAmount"></span>
                          </div>
                           <div class="col-sm-4">
                              <label asp-for="BalanceAmount"  class="form-label"></label>
                            <input  asp-for="BalanceAmount" placeholder="Balance" class="form-control" id="balanceamount_id" readonly ><br />
                             <span asp-validation-for="BalanceAmount"></span>
                          </div>
                 </div>
       


  </form>
  </div>







   
  

  @*<script>
      var totalprice=0;  
      var totalamount=0;
      var count=0;
      var content;
      var cal;
      $(".addtocart").click(function()
      {
          var invoice =$("#invoice_id").val();
          var customer =$("#customer_id").val();
          var item =$("#item_id").val();
          var itemName =$("#item_id").text();  
          var quantity =$("#quantity_id").val();
          var unitprice =$("#unitprice_id").val();

          var carttitle=$(".customer-title");
          var itemtitle=$(".item-title");

          //totalamount=totalprice+totalamount;
          var totalprice=(quantity*unitprice);
        // Already Exists
          for(var i=0;i<carttitle.length;i++)
          { 
              if(carttitle[i].innerText==customer && itemtitle[i].innerText==item )
              {
                  alert("Already Exist Item so quantity update ");                 
                  debugger;
                  var c_quant=$(".quantity");
                  var c_price=$(".price");
                  var c_total=$(".total");
                      
                  //var o_total=c_total[i].innerText;
                  var o_total=$(".total")[i].innerText;
                  alert("ammar");
                  c_price[i].innerHTML=unitprice; 
                  c_quant[i].innerHTML=quantity; 
                  c_total[i].innerHTML=totalprice;
                  totalamount=totalamount+totalprice-o_total;
                  $('#totalamount_id').val(totalamount);
             


                  return
              }
          }
          if(count==0)
          {
             content="<tr><th>InVoice No</th><th>Customer Id</th><th>Item Id</th><th>Item Name</th><th>Quantity</th><th>Unit Price</th><th>Total Price</th></tr>";
             $('#show_tab').append(content);
             count++;
          }    
           content="<tr><td>"+invoice+"</td> <td class='customer-title'>"+customer+"</td> <td class='item-title'>"+item+"</td> <td>"+itemName+"</td>  <td class='quantity'>"+quantity+"</td> <td class='price'>"+unitprice+"</td> <td class='total'>"+totalprice+"</td</tr>"
           $('#show_tab').append(content);
           count++;          
          totalamount=totalprice+totalamount;
           //total amount,paid amount,total balance
           $('#to').css('display', 'block');

           var t_a= $('#totalamount_id').val(totalamount);  
           $('#paidamount_id').keyup(function(){
           var value1 = parseFloat($('#totalamount_id').val()) || 0;
           var value2 = parseFloat($('#paidamount_id').val()) || 0;
           $('#balanceamount_id').val(value2 - value1);
            });

      });
        //function  calculatebalance(){
        //    debugger;
        //       var t_a= $('#totalamount_id').val();
        //       var p_a= $('#paidamount_id').val();
        //       var res= p_a-t_a;
        //       var c= $('#balanceamount_id').val(res);
        //}
  </script>*@
    <script>
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    </script>

    </body>